<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>IPOD-Dev-Doc | Wriprin's Blog</title><meta name="description" content="IPOD Development Doc 💫 Github  &gt; Read Songs From Phone Part - 1 commit the viewpagers and the style of tabindicator.  1. Download  the TabLayout.    Tip1, Tip2&lt;com.google.android.material.tabs."><meta name="keywords" content="devDoc"><meta name="author" content="Wriprin"><meta name="copyright" content="Wriprin"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://wriprin.gitee.io/2020/12/06/ipod-dev-doc/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="preconnect" href="//zz.bdstatic.com"/><meta property="og:type" content="article"><meta property="og:title" content="IPOD-Dev-Doc"><meta property="og:url" content="http://wriprin.gitee.io/2020/12/06/ipod-dev-doc/"><meta property="og:site_name" content="Wriprin's Blog"><meta property="og:description" content="IPOD Development Doc 💫 Github  &gt; Read Songs From Phone Part - 1 commit the viewpagers and the style of tabindicator.  1. Download  the TabLayout.    Tip1, Tip2&lt;com.google.android.material.tabs."><meta property="og:image" content="http://cdn.jsdelivr.net/gh/Wriprin/Wriprin-Gallery/Gallery/G3.jpg"><meta property="article:published_time" content="2020-12-06T05:01:33.000Z"><meta property="article:modified_time" content="2020-12-06T05:05:10.514Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="next" title="Git" href="http://wriprin.gitee.io/2020/11/22/git/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2020-12-06 13:05:10'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@master/Hexo/css/flink.min.css"><link rel="stylesheet" href="/css/wriprin.css"><link rel="stylesheet" href="/css/scroll.css"><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="Wriprin's Blog" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="http://cdn.jsdelivr.net/gh/Wriprin/Wriprin-Gallery/Gallery/wriprin.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">9</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">8</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">5</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 媒体</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/bangumis/"><i class="fa-fw fab fa-youtube"></i><span> 番剧</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/box/"><i class="fa-fw fab fa-xbox"></i><span> 聚宝盒</span></a></div><div class="menus_item"><a class="site-page" href="/talk/"><i class="fa-fw far fa-comment"></i><span> 微语</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw far fa-image"></i><span> 相册</span></a></li><li><a class="site-page" href="/home/"><i class="fa-fw fab fa-phoenix-framework"></i><span> 主页</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw far fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#IPOD-Development-Doc"><span class="toc-number">1.</span> <span class="toc-text">IPOD Development Doc</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#gt-Read-Songs-From-Phone-Part-1"><span class="toc-number">2.</span> <span class="toc-text">&gt; Read Songs From Phone Part - 1</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#commit-the-viewpagers-and-the-style-of-tabindicator"><span class="toc-number">2.0.0.0.1.</span> <span class="toc-text">commit the viewpagers and the style of tabindicator.</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Download-the-TabLayout-Tip1-Tip2"><span class="toc-number">2.0.0.1.</span> <span class="toc-text">1. Download  the TabLayout.    Tip1, Tip2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-ViewPager"><span class="toc-number">2.0.0.2.</span> <span class="toc-text">2. ViewPager</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Viewpageradapter"><span class="toc-number">2.0.0.3.</span> <span class="toc-text">3. Viewpageradapter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-New-songsFragment-xml-and-albumFragment-xml"><span class="toc-number">2.0.0.4.</span> <span class="toc-text">4.  New songsFragment.xml and albumFragment.xml</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#RecyclerView"><span class="toc-number">2.0.0.4.1.</span> <span class="toc-text">RecyclerView</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-New-tabindicator-xml-to-initialize-its-style"><span class="toc-number">2.0.0.5.</span> <span class="toc-text">5.  New tabindicator.xml to initialize its style</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#gt-Read-Songs-From-Phone-Part-2"><span class="toc-number">3.</span> <span class="toc-text">&gt; Read Songs From Phone Part - 2</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Add-the-permission-of-usage-fetch-all-the-songs-where-from-the-storage-to-app"><span class="toc-number">3.0.1.</span> <span class="toc-text">Add the permission of usage, fetch all the songs where from the storage to app.</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Add-permission-in-MainActivity-java"><span class="toc-number">3.0.1.1.</span> <span class="toc-text">1. Add permission in MainActivity.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Add-permission-in-AndroidMainfest-xml"><span class="toc-number">3.0.1.2.</span> <span class="toc-text">2. Add permission in AndroidMainfest.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Add-onRequestPermissionsResult-in-MainActivity-java"><span class="toc-number">3.0.1.3.</span> <span class="toc-text">3. Add onRequestPermissionsResult() in MainActivity.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-New-io-wriprin-android-ipod-MusicFiles-java-to-pack-attributes-of-songs"><span class="toc-number">3.0.1.4.</span> <span class="toc-text">4. New io.wriprin.android.ipod.MusicFiles.java to pack attributes of songs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#notice-about-the-short-key-Alt-Insert-to-generate-the-constructor-and-the-Getter-Setter"><span class="toc-number">3.0.1.5.</span> <span class="toc-text">notice about the short key, Alt + Insert to generate the constructor and the Getter, Setter;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-Add-ArrayList-getAllAudio"><span class="toc-number">3.0.1.6.</span> <span class="toc-text">5. Add ArrayList  getAllAudio</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-Global-Declaration-the-MusicFiles-to-use-it-when-user-choose-allow-permission"><span class="toc-number">3.0.1.7.</span> <span class="toc-text">6. Global Declaration the MusicFiles to use it when user choose allow permission</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#gt-Read-Songs-From-Phone-Part-3"><span class="toc-number">4.</span> <span class="toc-text">&gt; Read Songs From Phone Part - 3</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Display-SongList"><span class="toc-number">4.0.0.0.1.</span> <span class="toc-text">Display SongList</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-New-layout-resource-files-music-items-xml-to-display-the-SongList"><span class="toc-number">4.0.0.1.</span> <span class="toc-text">1. New layout resource files - music_items.xml to display the SongList</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-New-io-wriprin-android-ipod-MusicAdapter-java-collect-the-info"><span class="toc-number">4.0.0.2.</span> <span class="toc-text">2. New io.wriprin.android.ipod.MusicAdapter.java  collect the info</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ViewHolder"><span class="toc-number">4.0.0.2.1.</span> <span class="toc-text">ViewHolder()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Context"><span class="toc-number">4.0.0.2.2.</span> <span class="toc-text">Context()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Adapter"><span class="toc-number">4.0.0.2.3.</span> <span class="toc-text">Adapter()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Inflater"><span class="toc-number">4.0.0.2.4.</span> <span class="toc-text">Inflater()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#byte"><span class="toc-number">4.0.0.2.5.</span> <span class="toc-text">byte[]</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Import-Glide-dependency-to-build-gradle-Module-app"><span class="toc-number">4.0.0.3.</span> <span class="toc-text">3. Import Glide dependency to build.gradle (Module: app)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-songsFragment-java-recyclerview-match-Adapter"><span class="toc-number">4.0.0.4.</span> <span class="toc-text">4. songsFragment.java - recyclerview match Adapter</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#gt-Read-Songs-From-Phone-Part-4"><span class="toc-number">5.</span> <span class="toc-text">&gt; Read Songs From Phone Part - 4</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Commit-the-layout-of-PlayerActivity"><span class="toc-number">5.0.0.0.1.</span> <span class="toc-text">Commit the layout of PlayerActivity</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Add-the-Vector-Assest-which-under-drawable-and-change-to-a-suitable-color"><span class="toc-number">5.0.0.1.</span> <span class="toc-text">1. Add the Vector Assest which under drawable and change to a suitable color.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-New-io-wriprin-android-ipod-PlayerActivity-EmptyActivity"><span class="toc-number">5.0.0.2.</span> <span class="toc-text">2. New io.wriprin.android.ipod.PlayerActivity(EmptyActivity)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-New-Drawable-Resource-File-main-bg-xml"><span class="toc-number">5.0.0.3.</span> <span class="toc-text">3. New (Drawable Resource File ) - main_bg.xml</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#RootElement-is-shape"><span class="toc-number">5.0.0.3.1.</span> <span class="toc-text">RootElement is shape</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-New-Drawable-Resource-File-gradient-xml"><span class="toc-number">5.0.0.4.</span> <span class="toc-text">4. New (Drawable Resource File ) - gradient.xml</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ImageView%E2%80%99s-scaleType"><span class="toc-number">5.0.0.4.1.</span> <span class="toc-text">ImageView’s scaleType</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ellipsize"><span class="toc-number">5.0.0.4.2.</span> <span class="toc-text">ellipsize</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-Add-FloatingActionButton-in-activity-player-xml"><span class="toc-number">5.0.0.5.</span> <span class="toc-text">5. Add FloatingActionButton in activity_player.xml</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#why-use-focusable"><span class="toc-number">5.0.0.5.1.</span> <span class="toc-text">why use focusable</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#gt-Read-Songs-From-Phone-Part-5-PlayAudio"><span class="toc-number">6.</span> <span class="toc-text">&gt; Read Songs From Phone Part - 5 | PlayAudio</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Commit-the-FUNC-of-itemview-click"><span class="toc-number">6.0.0.0.1.</span> <span class="toc-text">Commit the FUNC of itemview.click</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Add-itemview-click-in-MusicAdapter-java"><span class="toc-number">6.0.0.1.</span> <span class="toc-text">1. Add itemview.click in MusicAdapter.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Add-TimeLine%E2%80%99s-layout-in-activity-player-xml"><span class="toc-number">6.0.0.2.</span> <span class="toc-text">2. Add TimeLine’s layout in activity_player.xml</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#SeekBar"><span class="toc-number">6.0.0.2.1.</span> <span class="toc-text">SeekBar</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Implement-the-Init-FUNC-of-PlayerActivity-java"><span class="toc-number">6.0.0.3.</span> <span class="toc-text">3. Implement the Init FUNC of PlayerActivity.java</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Declare-and-assign"><span class="toc-number">6.0.0.3.1.</span> <span class="toc-text">Declare and assign</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-MusicAdapter-java-to-add-intent-putExtra"><span class="toc-number">6.0.0.4.</span> <span class="toc-text">4. MusicAdapter.java to add intent.putExtra()</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#position"><span class="toc-number">6.0.0.4.1.</span> <span class="toc-text">position</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-PlayerActivity-java-get-the-position-from-MusicAdapter-java"><span class="toc-number">6.0.0.5.</span> <span class="toc-text">5. PlayerActivity.java get the position from MusicAdapter.java</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#static"><span class="toc-number">6.0.0.5.1.</span> <span class="toc-text">static</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-Implement-the-method-of-playing"><span class="toc-number">6.0.0.6.</span> <span class="toc-text">6. Implement the method of playing</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#MediaPlayer"><span class="toc-number">6.0.0.6.1.</span> <span class="toc-text">MediaPlayer</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-Implement-the-timeline-Durationbar-and-FortmattedTime"><span class="toc-number">6.0.0.7.</span> <span class="toc-text">7. Implement the timeline_Durationbar  and FortmattedTime</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#runOnUiThread-Thread-collocate-with-Handler"><span class="toc-number">6.0.0.7.1.</span> <span class="toc-text">runOnUiThread Thread collocate with Handler</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><header class="post-bg" id="page-header" style="background-image: url(http://cdn.jsdelivr.net/gh/Wriprin/Wriprin-Gallery/Gallery/G3.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Wriprin's Blog</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 媒体</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/bangumis/"><i class="fa-fw fab fa-youtube"></i><span> 番剧</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/box/"><i class="fa-fw fab fa-xbox"></i><span> 聚宝盒</span></a></div><div class="menus_item"><a class="site-page" href="/talk/"><i class="fa-fw far fa-comment"></i><span> 微语</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw far fa-image"></i><span> 相册</span></a></li><li><a class="site-page" href="/home/"><i class="fa-fw fab fa-phoenix-framework"></i><span> 主页</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw far fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">IPOD-Dev-Doc</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-12-06 13:01:33"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2020-12-06</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-12-06 13:05:10"><i class="fas fa-history fa-fw"></i> 更新于 2020-12-06</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/Note/">Note</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta__icon"></i><span>字数总计:</span><span class="word-count">941</span><span class="post-meta__separator">|</span><i class="far fa-clock fa-fw post-meta__icon"></i><span>阅读时长: 5 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="IPOD-Development-Doc"><a href="#IPOD-Development-Doc" class="headerlink" title="IPOD Development Doc"></a><strong>IPOD Development Doc</strong></h1><blockquote>
<p>💫 <a target="_blank" rel="noopener" href="https://github.com/Wriprin/IPOD">Github</a></p>
</blockquote>
<h1 id="gt-Read-Songs-From-Phone-Part-1"><a href="#gt-Read-Songs-From-Phone-Part-1" class="headerlink" title="> Read Songs From Phone Part - 1"></a>&gt; Read Songs From Phone Part - 1</h1><ul>
<li><h5 id="commit-the-viewpagers-and-the-style-of-tabindicator"><a href="#commit-the-viewpagers-and-the-style-of-tabindicator" class="headerlink" title="commit the viewpagers and the style of tabindicator."></a>commit the viewpagers and the style of tabindicator.</h5></li>
</ul>
<h4 id="1-Download-the-TabLayout-Tip1-Tip2"><a href="#1-Download-the-TabLayout-Tip1-Tip2" class="headerlink" title="1. Download  the TabLayout.    Tip1, Tip2"></a>1. Download  the TabLayout.    <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/fde38f367019">Tip1</a>, <a target="_blank" rel="noopener" href="https://www.cnblogs.com/duan-xue-bin/p/10059516.html">Tip2</a></h4><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com.google.android.material.tabs.TabLayout</span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@color/colorPrimaryDark<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/tab_layout<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">app:</span>tabIndicatorFullWidth</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">app:</span>tabIndicatorGravity</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">app:</span>tabTextColor</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@color/colorAccent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">app:</span>tabIndicatorHeight</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>40dp<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">app:</span>tabIndicatorColor</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#009688<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">app:</span>tabIndicator</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@drawable/tab_indicator<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre>
<h4 id="2-ViewPager"><a href="#2-ViewPager" class="headerlink" title="2. ViewPager"></a>2. <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_20785431/article/details/80865500">ViewPager</a></h4><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com.google.android.material.tabs.TabLayout</span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@color/colorPrimaryDark<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/tab_layout<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">app:</span>tabIndicatorFullWidth</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">app:</span>tabIndicatorGravity</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">app:</span>tabTextColor</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@color/colorAccent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">app:</span>tabIndicatorHeight</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>40dp<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">app:</span>tabIndicatorColor</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#009688<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">app:</span>tabIndicator</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@drawable/tab_indicator<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre>
<h4 id="3-Viewpageradapter"><a href="#3-Viewpageradapter" class="headerlink" title="3. Viewpageradapter"></a>3. Viewpageradapter</h4><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ViewPagerAdapter</span> <span class="token keyword">extends</span> <span class="token class-name">FragmentPagerAdapter</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> ArrayList<span class="token operator">&lt;</span>Fragment<span class="token operator">></span> fragments<span class="token punctuation">;</span>
    <span class="token keyword">private</span> ArrayList<span class="token operator">&lt;</span>String<span class="token operator">></span> titles<span class="token punctuation">;</span>


    <span class="token keyword">public</span> <span class="token function">ViewPagerAdapter</span><span class="token punctuation">(</span><span class="token annotation punctuation">@NonNull</span> FragmentManager fm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>fm<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fragments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>titles <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">addFragments</span><span class="token punctuation">(</span>Fragment fragment<span class="token punctuation">,</span> String title<span class="token punctuation">)</span><span class="token punctuation">{</span>
        fragments<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span><span class="token punctuation">;</span>
        titles<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@NonNull</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> Fragment <span class="token function">getItem</span><span class="token punctuation">(</span><span class="token keyword">int</span> position<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fragments<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fragments<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Nullable</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> CharSequence <span class="token function">getPageTitle</span><span class="token punctuation">(</span><span class="token keyword">int</span> position<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> titles<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h4 id="4-New-songsFragment-xml-and-albumFragment-xml"><a href="#4-New-songsFragment-xml-and-albumFragment-xml" class="headerlink" title="4.  New songsFragment.xml and albumFragment.xml"></a>4.  New songsFragment.xml and albumFragment.xml</h4><ul>
<li><h5 id="RecyclerView"><a href="#RecyclerView" class="headerlink" title="RecyclerView"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43468667/article/details/89435098?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160715478319195283043122%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=160715478319195283043122&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~baidu_landing_v2~default-6-89435098.nonecase&amp;utm_term=recyclerview&amp;spm=1018.2118.3001.4449">RecyclerView</a></h5></li>
</ul>
<h4 id="5-New-tabindicator-xml-to-initialize-its-style"><a href="#5-New-tabindicator-xml-to-initialize-its-style" class="headerlink" title="5.  New tabindicator.xml to initialize its style"></a>5.  New tabindicator.xml to initialize its style</h4><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shape</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>gradient</span> <span class="token attr-name"><span class="token namespace">android:</span>centerColor</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@color/colorPrimaryDark<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">android:</span>angle</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shape</span><span class="token punctuation">></span></span></code></pre>
<h1 id="gt-Read-Songs-From-Phone-Part-2"><a href="#gt-Read-Songs-From-Phone-Part-2" class="headerlink" title="> Read Songs From Phone Part - 2"></a><strong>&gt; Read Songs From Phone Part - 2</strong></h1><ul>
<li><h3 id="Add-the-permission-of-usage-fetch-all-the-songs-where-from-the-storage-to-app"><a href="#Add-the-permission-of-usage-fetch-all-the-songs-where-from-the-storage-to-app" class="headerlink" title="Add the permission of usage, fetch all the songs where from the storage to app."></a>Add the permission of usage, fetch all the songs where from the storage to app.</h3></li>
</ul>
<h4 id="1-Add-permission-in-MainActivity-java"><a href="#1-Add-permission-in-MainActivity-java" class="headerlink" title="1. Add permission in MainActivity.java"></a>1. Add permission in MainActivity.java</h4><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">permission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">permission</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ContextCompat<span class="token punctuation">.</span><span class="token function">checkSelfPermission</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>WRITE_EXTERNAL_STORAGE<span class="token punctuation">)</span>
        <span class="token operator">!=</span> PackageManager<span class="token punctuation">.</span>PERMISSION_GRANTED<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        ActivityCompat<span class="token punctuation">.</span><span class="token function">requestPermissions</span><span class="token punctuation">(</span>MainActivity<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>WRITE_EXTERNAL_STORAGE<span class="token punctuation">}</span><span class="token punctuation">,</span>REQUEST_CODE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        musicFiles <span class="token operator">=</span> <span class="token function">getAllAudio</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initViewPager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h4 id="2-Add-permission-in-AndroidMainfest-xml"><a href="#2-Add-permission-in-AndroidMainfest-xml" class="headerlink" title="2. Add permission in AndroidMainfest.xml"></a>2. Add permission in AndroidMainfest.xml</h4><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>android.permission.WRITE_EXTERNAL_STORAGE<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre>
<h4 id="3-Add-onRequestPermissionsResult-in-MainActivity-java"><a href="#3-Add-onRequestPermissionsResult-in-MainActivity-java" class="headerlink" title="3. Add onRequestPermissionsResult() in MainActivity.java"></a>3. Add onRequestPermissionsResult() in MainActivity.java</h4><pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onRequestPermissionsResult</span><span class="token punctuation">(</span><span class="token keyword">int</span> requestCode<span class="token punctuation">,</span> <span class="token annotation punctuation">@NonNull</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span> permissions<span class="token punctuation">,</span> <span class="token annotation punctuation">@NonNull</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> grantResults<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onRequestPermissionsResult</span><span class="token punctuation">(</span>requestCode<span class="token punctuation">,</span> permissions<span class="token punctuation">,</span> grantResults<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>requestCode <span class="token operator">==</span> REQUEST_CODE<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>grantResults<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> PackageManager<span class="token punctuation">.</span>PERMISSION_GRANTED<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//Do whatever you want permission related;</span>
            musicFiles <span class="token operator">=</span> <span class="token function">getAllAudio</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">initViewPager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
            ActivityCompat<span class="token punctuation">.</span><span class="token function">requestPermissions</span><span class="token punctuation">(</span>MainActivity<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>Manifest<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>WRITE_EXTERNAL_STORAGE<span class="token punctuation">}</span><span class="token punctuation">,</span>REQUEST_CODE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h4 id="4-New-io-wriprin-android-ipod-MusicFiles-java-to-pack-attributes-of-songs"><a href="#4-New-io-wriprin-android-ipod-MusicFiles-java-to-pack-attributes-of-songs" class="headerlink" title="4. New io.wriprin.android.ipod.MusicFiles.java to pack attributes of songs"></a>4. New io.wriprin.android.ipod.MusicFiles.java to pack attributes of songs</h4><ul>
<li><h4 id="notice-about-the-short-key-Alt-Insert-to-generate-the-constructor-and-the-Getter-Setter"><a href="#notice-about-the-short-key-Alt-Insert-to-generate-the-constructor-and-the-Getter-Setter" class="headerlink" title="notice about the short key, Alt + Insert to generate the constructor and the Getter, Setter;"></a>notice about the short key, Alt + Insert to generate the constructor and the Getter, Setter;</h4></li>
</ul>
<h4 id="5-Add-ArrayList-getAllAudio"><a href="#5-Add-ArrayList-getAllAudio" class="headerlink" title="5. Add ArrayList  getAllAudio"></a>5. Add ArrayList<musicfiles>  getAllAudio</musicfiles></h4><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> ArrayList<span class="token operator">&lt;</span>MusicFiles<span class="token operator">></span> <span class="token function">getAllAudio</span> <span class="token punctuation">(</span>Context context<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
            ArrayList<span class="token operator">&lt;</span>MusicFiles<span class="token operator">></span> tempAudioList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Uri uri <span class="token operator">=</span> MediaStore<span class="token punctuation">.</span>Audio<span class="token punctuation">.</span>Media<span class="token punctuation">.</span>EXTERNAL_CONTENT_URI<span class="token punctuation">;</span>
            String<span class="token punctuation">[</span><span class="token punctuation">]</span> projection <span class="token operator">=</span>
            <span class="token punctuation">{</span>
                MediaStore<span class="token punctuation">.</span>Audio<span class="token punctuation">.</span>Media<span class="token punctuation">.</span>ALBUM<span class="token punctuation">,</span>
                MediaStore<span class="token punctuation">.</span>Audio<span class="token punctuation">.</span>Media<span class="token punctuation">.</span>TITLE<span class="token punctuation">,</span>
                MediaStore<span class="token punctuation">.</span>Audio<span class="token punctuation">.</span>Media<span class="token punctuation">.</span>DURATION<span class="token punctuation">,</span>
                MediaStore<span class="token punctuation">.</span>Audio<span class="token punctuation">.</span>Media<span class="token punctuation">.</span>DATA<span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">//for path</span>
                MediaStore<span class="token punctuation">.</span>Audio<span class="token punctuation">.</span>Media<span class="token punctuation">.</span>ARTIST<span class="token punctuation">,</span>
                MediaStore<span class="token punctuation">.</span>Audio<span class="token punctuation">.</span>Media<span class="token punctuation">.</span>_ID

            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            Cursor cursor <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getContentResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>uri<span class="token punctuation">,</span>projection<span class="token punctuation">,</span>null<span class="token punctuation">,</span>null<span class="token punctuation">,</span> order<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cursor <span class="token operator">!=</span> null<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span>cursor<span class="token punctuation">.</span><span class="token function">moveToNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    String album <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    String title <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    String duration <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    String path <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    String artist <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    String id <span class="token operator">=</span> cursor<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                    MusicFiles musicFiles <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MusicFiles</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> title<span class="token punctuation">,</span> artist<span class="token punctuation">,</span> album<span class="token punctuation">,</span> duration<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment" spellcheck="true">//take log.e for check</span>
                    Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">"Path:"</span> <span class="token operator">+</span> path<span class="token punctuation">,</span> <span class="token string">"Album"</span> <span class="token operator">+</span> album<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    tempAudioList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>musicFiles<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>duplicate<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>album<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        albums<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>musicFiles<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        duplicate<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>album<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                cursor<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> tempAudioList<span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qqq3670279/article/details/51475899?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160715919119726885832985%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=160715919119726885832985&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-51475899.nonecase&amp;utm_term=getcontentresolver&amp;spm=1018.2118.3001.4449">context.getContentResolver().query</a></li>
</ul>
<h4 id="6-Global-Declaration-the-MusicFiles-to-use-it-when-user-choose-allow-permission"><a href="#6-Global-Declaration-the-MusicFiles-to-use-it-when-user-choose-allow-permission" class="headerlink" title="6. Global Declaration the MusicFiles to use it when user choose allow permission"></a>6. Global Declaration the MusicFiles to use it when user choose allow permission</h4><h1 id="gt-Read-Songs-From-Phone-Part-3"><a href="#gt-Read-Songs-From-Phone-Part-3" class="headerlink" title="> Read Songs From Phone Part - 3"></a><strong>&gt; Read Songs From Phone Part - 3</strong></h1><ul>
<li><h5 id="Display-SongList"><a href="#Display-SongList" class="headerlink" title="Display SongList"></a>Display SongList</h5></li>
</ul>
<h4 id="1-New-layout-resource-files-music-items-xml-to-display-the-SongList"><a href="#1-New-layout-resource-files-music-items-xml-to-display-the-SongList" class="headerlink" title="1. New layout resource files - music_items.xml to display the SongList"></a>1. New layout resource files - music_items.xml to display the SongList</h4><h4 id="2-New-io-wriprin-android-ipod-MusicAdapter-java-collect-the-info"><a href="#2-New-io-wriprin-android-ipod-MusicAdapter-java-collect-the-info" class="headerlink" title="2. New io.wriprin.android.ipod.MusicAdapter.java  collect the info"></a>2. New io.wriprin.android.ipod.MusicAdapter.java  collect the info</h4><ul>
<li><h5 id="ViewHolder"><a href="#ViewHolder" class="headerlink" title="ViewHolder()"></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wugu-ren/p/6106379.html">ViewHolder()</a></h5></li>
<li><h5 id="Context"><a href="#Context" class="headerlink" title="Context()"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/u013196348/article/details/94395205?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160716874619724839511869%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=160716874619724839511869&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-3-94395205.nonecase&amp;utm_term=context&amp;spm=1018.2118.3001.4449">Context()</a></h5></li>
<li><h5 id="Adapter"><a href="#Adapter" class="headerlink" title="Adapter()"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/fznpcy/article/details/8658155?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160716922219724818061062%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=160716922219724818061062&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-1-8658155.nonecase&amp;utm_term=adapter&amp;spm=1018.2118.3001.4449">Adapter()</a></h5></li>
<li><h5 id="Inflater"><a href="#Inflater" class="headerlink" title="Inflater()"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_42376054/article/details/102509594?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160715644219721940212443%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=160715644219721940212443&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-1-102509594.nonecase&amp;utm_term=inflater&amp;spm=1018.2118.3001.4449">Inflater()</a></h5></li>
<li><h5 id="byte"><a href="#byte" class="headerlink" title="byte[]"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/bzlj2912009596/article/details/79146622?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160717113419724813259611%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=160717113419724813259611&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-79146622.nonecase&amp;utm_term=android%20byte&amp;spm=1018.2118.3001.4449">byte[]</a></h5></li>
</ul>
<h4 id="3-Import-Glide-dependency-to-build-gradle-Module-app"><a href="#3-Import-Glide-dependency-to-build-gradle-Module-app" class="headerlink" title="3. Import Glide dependency to build.gradle (Module: app)"></a>3. Import <a target="_blank" rel="noopener" href="https://blog.csdn.net/xxdw1992/article/details/93624487?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160717011019724813279848%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=160717011019724813279848&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-1-93624487.nonecase&amp;utm_term=glide&amp;spm=1018.2118.3001.4449">Glide</a> dependency to build.gradle (Module: app)</h4><pre class=" language-gradle"><code class="language-gradle">//Glide
implementation 'com.github.bumptech.glide:glide:4.11.0'
annotationProcessor 'com.github.bumptech.glide:compiler:4.11.0'</code></pre>
<h4 id="4-songsFragment-java-recyclerview-match-Adapter"><a href="#4-songsFragment-java-recyclerview-match-Adapter" class="headerlink" title="4. songsFragment.java - recyclerview match Adapter"></a>4. songsFragment.java - recyclerview match Adapter</h4><h1 id="gt-Read-Songs-From-Phone-Part-4"><a href="#gt-Read-Songs-From-Phone-Part-4" class="headerlink" title="> Read Songs From Phone Part - 4"></a><strong>&gt; Read Songs From Phone Part - 4</strong></h1><ul>
<li><h5 id="Commit-the-layout-of-PlayerActivity"><a href="#Commit-the-layout-of-PlayerActivity" class="headerlink" title="Commit the layout of PlayerActivity"></a>Commit the layout of PlayerActivity</h5></li>
</ul>
<h4 id="1-Add-the-Vector-Assest-which-under-drawable-and-change-to-a-suitable-color"><a href="#1-Add-the-Vector-Assest-which-under-drawable-and-change-to-a-suitable-color" class="headerlink" title="1. Add the Vector Assest which under drawable and change to a suitable color."></a>1. Add the Vector Assest which under drawable and change to a suitable color.</h4><p><img src= "/img/loading.gif" data-src="http://cdn.jsdelivr.net/gh/Wriprin/Wriprin-Gallery/Gallery/loading-02.gif" data-original="http://cdn.jsdelivr.net/gh/Wriprin/Wriprin-Gallery/Gallery/VectorAssest.png" alt=""></p>
<h4 id="2-New-io-wriprin-android-ipod-PlayerActivity-EmptyActivity"><a href="#2-New-io-wriprin-android-ipod-PlayerActivity-EmptyActivity" class="headerlink" title="2. New io.wriprin.android.ipod.PlayerActivity(EmptyActivity)"></a>2. New io.wriprin.android.ipod.PlayerActivity(EmptyActivity)</h4><h4 id="3-New-Drawable-Resource-File-main-bg-xml"><a href="#3-New-Drawable-Resource-File-main-bg-xml" class="headerlink" title="3. New (Drawable Resource File ) - main_bg.xml"></a>3. New (Drawable Resource File ) - main_bg.xml</h4><ul>
<li><h5 id="RootElement-is-shape"><a href="#RootElement-is-shape" class="headerlink" title="RootElement is shape"></a>RootElement is shape</h5></li>
</ul>
<h4 id="4-New-Drawable-Resource-File-gradient-xml"><a href="#4-New-Drawable-Resource-File-gradient-xml" class="headerlink" title="4. New (Drawable Resource File ) - gradient.xml"></a>4. New (Drawable Resource File ) - gradient.xml</h4><ul>
<li><h5 id="ImageView’s-scaleType"><a href="#ImageView’s-scaleType" class="headerlink" title="ImageView’s scaleType"></a>ImageView’s <a target="_blank" rel="noopener" href="https://blog.csdn.net/laoziyueguo3/article/details/48312347?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160721888519725271058745%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=160721888519725271058745&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-3-48312347.pc_search_result_no_baidu_js&amp;utm_term=scaletype&amp;spm=1018.2118.3001.4449">scaleType</a></h5></li>
<li><h5 id="ellipsize"><a href="#ellipsize" class="headerlink" title="ellipsize"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/imdxt1986/article/details/6942743?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160721921819724838541780%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=160721921819724838541780&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-1-6942743.pc_search_result_no_baidu_js&amp;utm_term=ellipsize&amp;spm=1018.2118.3001.4449">ellipsize</a></h5></li>
</ul>
<h4 id="5-Add-FloatingActionButton-in-activity-player-xml"><a href="#5-Add-FloatingActionButton-in-activity-player-xml" class="headerlink" title="5. Add FloatingActionButton in activity_player.xml"></a>5. Add <a target="_blank" rel="noopener" href="https://blog.csdn.net/gaolh89/article/details/79759404?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160721938819195271620070%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=160721938819195271620070&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-2-79759404.pc_search_result_no_baidu_js&amp;utm_term=FloatingActionButton&amp;spm=1018.2118.3001.4449">FloatingActionButton</a> in activity_player.xml</h4><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com.google.android.material.floatingactionbutton.FloatingActionButton</span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/play_pause<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@drawable/ic_play<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_centerHorizontal</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_centerVertical</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>focusable</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>clickable</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span></code></pre>
<ul>
<li><h5 id="why-use-focusable"><a href="#why-use-focusable" class="headerlink" title="why use focusable"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/ckf1122/article/details/6269221?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control">why use focusable</a></h5></li>
</ul>
<h1 id="gt-Read-Songs-From-Phone-Part-5-PlayAudio"><a href="#gt-Read-Songs-From-Phone-Part-5-PlayAudio" class="headerlink" title="> Read Songs From Phone Part - 5 | PlayAudio"></a><strong>&gt; Read Songs From Phone Part - 5 | PlayAudio</strong></h1><ul>
<li><h5 id="Commit-the-FUNC-of-itemview-click"><a href="#Commit-the-FUNC-of-itemview-click" class="headerlink" title="Commit the FUNC of itemview.click"></a>Commit the FUNC of <a target="_blank" rel="noopener" href="https://blog.csdn.net/kent_todo/article/details/41943935?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160722044019725271027060%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=160722044019725271027060&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-41943935.pc_search_result_no_baidu_js&amp;utm_term=itemview&amp;spm=1018.2118.3001.4449">itemview</a>.click</h5></li>
</ul>
<h4 id="1-Add-itemview-click-in-MusicAdapter-java"><a href="#1-Add-itemview-click-in-MusicAdapter-java" class="headerlink" title="1. Add itemview.click in MusicAdapter.java"></a>1. Add itemview.click in MusicAdapter.java</h4><pre class=" language-java"><code class="language-java">holder<span class="token punctuation">.</span>itemView<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">View<span class="token punctuation">.</span>OnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onClick</span><span class="token punctuation">(</span>View view<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Intent intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> PlayerActivity<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string">"position"</span><span class="token punctuation">,</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mContext<span class="token punctuation">.</span><span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="2-Add-TimeLine’s-layout-in-activity-player-xml"><a href="#2-Add-TimeLine’s-layout-in-activity-player-xml" class="headerlink" title="2. Add TimeLine’s layout in activity_player.xml"></a>2. Add TimeLine’s layout in activity_player.xml</h4><ul>
<li><h5 id="SeekBar"><a href="#SeekBar" class="headerlink" title="SeekBar"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/wu_kangjie/article/details/80145731?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160722074419195271695819%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=160722074419195271695819&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-1-80145731.pc_search_result_no_baidu_js&amp;utm_term=seekbar&amp;spm=1018.2118.3001.4449">SeekBar</a></h5></li>
</ul>
<h4 id="3-Implement-the-Init-FUNC-of-PlayerActivity-java"><a href="#3-Implement-the-Init-FUNC-of-PlayerActivity-java" class="headerlink" title="3. Implement the Init FUNC of PlayerActivity.java"></a>3. Implement the Init FUNC of PlayerActivity.java</h4><ul>
<li><h5 id="Declare-and-assign"><a href="#Declare-and-assign" class="headerlink" title="Declare and assign"></a>Declare and assign</h5></li>
</ul>
<h4 id="4-MusicAdapter-java-to-add-intent-putExtra"><a href="#4-MusicAdapter-java-to-add-intent-putExtra" class="headerlink" title="4. MusicAdapter.java to add intent.putExtra()"></a>4. MusicAdapter.java to add <a target="_blank" rel="noopener" href="https://blog.csdn.net/ching_zhi/article/details/53842302?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160722165919195265193358%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=160722165919195265193358&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-4-53842302.pc_search_result_no_baidu_js&amp;utm_term=putextra&amp;spm=1018.2118.3001.4449">intent.putExtra()</a></h4><pre class=" language-java"><code class="language-java">intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string">"position"</span><span class="token punctuation">,</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<ul>
<li><h5 id="position"><a href="#position" class="headerlink" title="position"></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/vus520/archive/2011/08/30/2561932.html">position</a></h5></li>
</ul>
<h4 id="5-PlayerActivity-java-get-the-position-from-MusicAdapter-java"><a href="#5-PlayerActivity-java-get-the-position-from-MusicAdapter-java" class="headerlink" title="5. PlayerActivity.java get the position from MusicAdapter.java"></a>5. PlayerActivity.java get the position from MusicAdapter.java</h4><pre class=" language-java"><code class="language-java">position <span class="token operator">=</span> <span class="token function">getIntent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getIntExtra</span><span class="token punctuation">(</span><span class="token string">"position"</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<ul>
<li><h5 id="static"><a href="#static" class="headerlink" title="static"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/guotianqing/article/details/79828100?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160722214719724838563346%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=160722214719724838563346&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~hot_rank-1-79828100.pc_search_result_no_baidu_js&amp;utm_term=static%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E4%BD%9C%E7%94%A8&amp;spm=1018.2118.3001.4449">static</a></h5></li>
</ul>
<h4 id="6-Implement-the-method-of-playing"><a href="#6-Implement-the-method-of-playing" class="headerlink" title="6. Implement the method of playing"></a>6. Implement the method of playing</h4><pre class=" language-java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">getIntentMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    position <span class="token operator">=</span> <span class="token function">getIntent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getIntExtra</span><span class="token punctuation">(</span><span class="token string">"position"</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String sender <span class="token operator">=</span> <span class="token function">getIntent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getStringExtra</span><span class="token punctuation">(</span><span class="token string">"sender"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>sender <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> sender<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"albumDetails"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        listSongs <span class="token operator">=</span> albumFiles<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        listSongs <span class="token operator">=</span> mFiles<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>listSongs <span class="token operator">!=</span> null<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        playPauseBtn<span class="token punctuation">.</span><span class="token function">setImageResource</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>ic_pause<span class="token punctuation">)</span><span class="token punctuation">;</span>
        uri <span class="token operator">=</span> Uri<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>listSongs<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mediaPlayer <span class="token operator">!=</span> null<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        mediaPlayer<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mediaPlayer<span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mediaPlayer <span class="token operator">=</span> MediaPlayer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> uri<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mediaPlayer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        mediaPlayer <span class="token operator">=</span> MediaPlayer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> uri<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mediaPlayer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    seekBar<span class="token punctuation">.</span><span class="token function">setMax</span><span class="token punctuation">(</span>mediaPlayer<span class="token punctuation">.</span><span class="token function">getDuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">metaData</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<ul>
<li><h5 id="MediaPlayer"><a href="#MediaPlayer" class="headerlink" title="MediaPlayer"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/zhaokx3/article/details/53432718?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160722327319724848150921%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=160722327319724848150921&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~hot_rank-7-53432718.pc_search_result_no_baidu_js&amp;utm_term=mediaplayer&amp;spm=1018.2118.3001.4449">MediaPlayer</a></h5></li>
</ul>
<h4 id="7-Implement-the-timeline-Durationbar-and-FortmattedTime"><a href="#7-Implement-the-timeline-Durationbar-and-FortmattedTime" class="headerlink" title="7. Implement the timeline_Durationbar  and FortmattedTime"></a>7. Implement the timeline_Durationbar  and FortmattedTime</h4><ul>
<li><h5 id="runOnUiThread-Thread-collocate-with-Handler"><a href="#runOnUiThread-Thread-collocate-with-Handler" class="headerlink" title="runOnUiThread Thread collocate with Handler"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/cf8833/article/details/90297775?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160722366319724813238138%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=160722366319724813238138&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~hot_rank-4-90297775.pc_search_result_no_baidu_js&amp;utm_term=runonuithread&amp;spm=1018.2118.3001.4449">runOnUiThread</a> Thread collocate with <a target="_blank" rel="noopener" href="https://blog.csdn.net/wsq_tomato/article/details/80301851?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522160722545519724847137907%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&amp;request_id=160722545519724847137907&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~hot_rank-1-80301851.pc_search_result_no_baidu_js&amp;utm_term=handler&amp;spm=1018.2118.3001.4449">Handler</a></h5></li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Wriprin</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://wriprin.gitee.io/2020/12/06/ipod-dev-doc/">http://wriprin.gitee.io/2020/12/06/ipod-dev-doc/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://wriprin.gitee.io" target="_blank">Wriprin's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/devDoc/">devDoc</a></div><div class="post_share"><div class="social-share" data-image="http://cdn.jsdelivr.net/gh/Wriprin/Wriprin-Gallery/Gallery/G3.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2020/11/22/git/"><img class="next-cover" data-src="/true" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Git</div></div></a></div></nav></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021  <i id="heartbeat" class="fa fas fa-heartbeat"></i> Wriprin</div><div class="framework-info"></div></div><head><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></head></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/search/local-search.js"></script><script src="/js/calendar.js"></script><script src="/js/languages.js"></script><script src="/js/xkTool.js"></script><script src="/js/wriprin.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":120,"height":260},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var i=n.imageLazyLoadSetting.isSPA,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){i&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,e,a=0;a<r.length;a++)t=r[a],e=void 0,0<=(e=t.getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(n.innerHeight+240||document.documentElement.clientHeight+240)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},n.src=i}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body></html>